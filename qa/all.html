<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><title>QA Runner</title><link rel="stylesheet" href="all.css"/></head><body><h1>EcoBike QA</h1><div><button id="runPwa">Run PWA tests</button><button id="runAdmin">Run Admin tests</button><button id="runAll">Run ALL</button></div><table id="report"><thead><tr><th>Scope</th><th>Spec</th><th>Status</th><th>Time(ms)</th><th>Notes</th></tr></thead><tbody></tbody></table><pre id="log"></pre><script>const logEl=document.getElementById('log');const tbody=document.querySelector('#report tbody');let waiting=0;function addRow(scope,s){const tr=document.createElement('tr');tr.className=s.status?'pass':'fail';tr.innerHTML=`<td>${scope}</td><td>${s.name}</td><td>${s.status?'PASS':'FAIL'}</td><td>${s.duration}</td><td>${(s.notes||[]).join('; ')}</td>`;tbody.appendChild(tr);}function handle(scope,data){data.specs.forEach(s=>addRow(scope,s));log(`console errors:${data.errors} warnings:${data.warnings} 404:${data.http[404]} 500:${data.http[500]}`);waiting--;if(!waiting)finalVerdict();}function log(msg){logEl.textContent+="\n"+msg;logEl.scrollTop=logEl.scrollHeight;}function run(scope){waiting++;const iframe=document.createElement('iframe');iframe.src=scope+"/tests/index.html?auto=1";iframe.style.display='none';document.body.appendChild(iframe);}function finalVerdict(){const fails=tbody.querySelectorAll('tr.fail').length;log(fails?"НЕ ГОДНО":"ГОДНО");}window.addEventListener('message',e=>{if(e.data&&e.data.scope)handle(e.data.scope,e.data);});document.getElementById('runPwa').onclick=()=>run('/app');document.getElementById('runAdmin').onclick=()=>run('/ecobike-admin');document.getElementById('runAll').onclick=()=>{run('/app');run('/ecobike-admin');};</script></body></html>
